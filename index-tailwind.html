// Find the function showMCPDiagnosticResults() and rewrite it like this
function showMCPDiagnosticResults() {
    const modal = document.createElement('div');
    modal.className = 'fixed inset-0 flex items-center justify-center z-50 bg-black bg-opacity-75';
    modal.innerHTML = `
        <div class="bg-gray-900 p-6 rounded-lg shadow-lg max-w-2xl w-full max-h-[80vh] overflow-y-auto">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-xl font-bold text-white">Résultats du diagnostic MCP</h3>
                <button class="text-gray-400 hover:text-white" id="close-mcp-modal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <!-- Simulation du scan en temps réel -->
            <div id="scan-progress" class="mb-4">
                <div class="flex items-center justify-between mb-2">
                    <div class="text-blue-400 text-sm">
                        <span id="scan-percentage">0%</span> - Analyse en cours...
                    </div>
                    <div id="scan-status" class="text-yellow-400 text-sm font-mono">Initialisation...</div>
                </div>
                <div class="h-2 bg-gray-700 rounded-full overflow-hidden">
                    <div id="scan-bar" class="h-full bg-blue-500 w-0 transition-all duration-300"></div>
                </div>
            </div>
            
            <div id="scan-details" class="space-y-4 opacity-0 transition-opacity duration-300">
                <!-- Le contenu sera ajouté dynamiquement -->
            </div>
        </div>
    `;
    
    document.body.appendChild(modal);
    
    // Gérer la fermeture du modal
    document.getElementById('close-mcp-modal').addEventListener('click', () => {
        document.body.removeChild(modal);
        if (mcpConnector) {
            mcpConnector.disconnect();
        }
    });
    
    // Démarrer le scan réel
    performRealMCPScan();
}
